"use strict";!function(o){o.module("application",["ngRoute"]).config(["$locationProvider","$routeProvider",function(o,t){o.html5Mode(!0),t.when("/login",{templateUrl:"www/app/routes/loginpage/loginpage.htm"}).when("/room/:id",{template:"<r-room></r-room>"}).when("/welcome",{templateUrl:"www/app/routes/welcome/welcome.htm"}).otherwise({redirectTo:"/welcome"})}])}(window.angular),function(o){o.module("application").factory("navigationService",function(){function o(){return e}function t(o){e||(e=[]),e.push(o)}function n(o){e.forEach(function(t,n){t.id===o.id&&e.splice(n,1)})}return{getNavigation:o,addNavigationItem:t,removeNavigationItem:n};var e})}(window.angular),function(o){o.module("application").service("loginService",["$location",function(o){function t(t){this.loggedInUser={name:t},this.inputName=null,o.path("/rooms")}function n(){this.loggedInUser={},o.path("/welcome")}function e(){return Object.keys(this.loggedInUser).length>0}this.loggedInUser={},this.login=t,this.logout=n,this.isLoggedIn=e}])}(window.angular),function(o){o.module("application").factory("roomService",["$location","$routeParams",function(o,t){function n(){return console.log("getRooms is: ",n),r}function e(){var o=[],n="";o.push(r);for(var e=0;e<o[0].length;e++)o[0][e].id===parseInt(t.id,10)&&(n=o[0][e].name);return n}function i(){return r=[{name:"Donkey Kong",id:1,picture:"/assets/images/dk.jpg"},{name:"Sonic",id:2,picture:"/assets/images/sonic.jpg"},{name:"Zelda",id:3,picture:"/assets/images/zelda.jpg"}]}return{getRooms:n,getRoomById:e,fetchRoomsFromDB:i};var r}])}(window.angular),function(o){o.module("application").controller("exerciseOneController",["$routeParams","es",function(o,t){this.es=t}])}(window.angular),function(o){o.module("application").controller("exerciseTwoController",["$routeParams","es",function(o,t){function n(){return e[Math.floor(Math.random()*e.length)]}this.es=t,this.title="Exercise 2";var e=[{name:"Brown",hex:"#A52A2A"},{name:"Blue",hex:"#0000FF"},{name:"Gainsboro",hex:"#DCDCDC"}];this.objectArray=[],this._createObject=function(){return{name:"Obj"+(this.objectArray.length+1),clickCount:0,color:n()}},this.controllerInitObject=this.objectArray,this.addNewObject=function(){this.objectArray.push(this._createObject())};this.buttonText="Button text",this.buttonMouseEnter=function(){this.buttonText="Rolled over"},this.buttonResetClick=function(){this.buttonText="Button text"}}])}(window.angular),function(o){o.module("application").component("navigation",{templateUrl:"www/app/components/navigation/navigation.html",controller:"navigationController",controllerAs:"ctrl"})}(window.angular),function(o){o.module("application").controller("navigationController",["$location","loginService","navigationService","roomService",function(o,t,n,e){this.$onInit=function(){function i(t){return t===o.path()}this.loginService=t,this.navigationService=n,this.roomService=e,this.isItemActive=i;var r={title:"Welcome",url:"/welcome"};n.addNavigationItem(r),e.fetchRoomsFromDB().forEach(function(o){var t={title:o.name,url:"/room/"+o.id};n.addNavigationItem(t)})}}])}(window.angular),function(o){o.module("application").component("gwLogin",{templateUrl:"www/app/components/login/login.htm",controller:"loginComponentController",controllerAs:"ctrl"})}(window.angular),function(o){o.module("application").controller("loginComponentController",["loginService",function(o){this.loginService=o}])}(window.angular),function(o){o.module("application").component("rRoom",{templateUrl:"www/app/components/rooms/room.htm",controller:"roomComponentController",controllerAs:"ctrl"})}(window.angular),function(o){o.module("application").controller("roomComponentController",["roomService",function(o){this.$onInit=function(){this.roomService=o,this.startTime=new Date,this.startTime.setHours(0,0,0,0),this.endTime=new Date,this.endTime.setHours(0,0,0,0),this.reserveReasons=["Birthday","Conference","Interview","Scrum Meeting","Honeymoon"],this.master={}},this.roomSubmission=function(){return console.log("start",this.startTime),console.log("end",this.endTime),this.startTime>=this.endTime?alert("Message from controller: time invalid"):this.myForm.$invalid?alert("Message from controller: form invalid"):void alert("Room submitted")}}])}(window.angular),function(o){o.module("application").controller("roomsController",["loginService",function(o){this.loginService=o}])}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJpbmRleC5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL3Jvb21zL3Jvb20uc2VydmljZS5qcyIsImNvbnRyb2xsZXJzL2V4ZXJjaXNlT25lQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2V4ZXJjaXNlVHdvQ29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbXBvbmVudC5qcyIsImNvbXBvbmVudHMvbG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvcm9vbXMvcm9vbS5jb21wb25lbnQuanMiLCJjb21wb25lbnRzL3Jvb21zL3Jvb20uY29udHJvbGxlci5qcyIsInJvdXRlcy9yb29tcy9yb29tcy5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwidGVtcGxhdGUiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwid2luZG93IiwiZmFjdG9yeSIsImdldE5hdmlnYXRpb24iLCJuYXZpZ2F0aW9uSXRlbXMiLCJhZGROYXZpZ2F0aW9uSXRlbSIsIml0ZW0iLCJwdXNoIiwicmVtb3ZlTmF2aWdhdGlvbkl0ZW0iLCJmb3JFYWNoIiwiaXRlbUluTmF2aWdhdGlvbiIsImluZGV4IiwiaWQiLCJzcGxpY2UiLCJzZXJ2aWNlIiwiJGxvY2F0aW9uIiwiX2xvZ2luIiwiaW5wdXROYW1lIiwidGhpcyIsImxvZ2dlZEluVXNlciIsIm5hbWUiLCJwYXRoIiwiX2xvZ291dCIsIl9pc0xvZ2dlZEluIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImxvZ2luIiwibG9nb3V0IiwiaXNMb2dnZWRJbiIsIiRyb3V0ZVBhcmFtcyIsImdldFJvb21zIiwiY29uc29sZSIsImxvZyIsInJvb21zIiwiZ2V0Um9vbUJ5SWQiLCJyb29tc0FycmF5IiwibXlSb29tIiwiaSIsInBhcnNlSW50IiwiZmV0Y2hSb29tc0Zyb21EQiIsInBpY3R1cmUiLCJjb250cm9sbGVyIiwiZXMiLCJfZ2V0UmFuZG9tQ29sb3JGcm9tQ29sbGVjdGlvbiIsIl9wb3NzaWJsZUNvbG9ycyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRpdGxlIiwiaGV4Iiwib2JqZWN0QXJyYXkiLCJfY3JlYXRlT2JqZWN0IiwiY2xpY2tDb3VudCIsImNvbG9yIiwiY29udHJvbGxlckluaXRPYmplY3QiLCJhZGROZXdPYmplY3QiLCJidXR0b25UZXh0IiwiYnV0dG9uTW91c2VFbnRlciIsImJ1dHRvblJlc2V0Q2xpY2siLCJjb21wb25lbnQiLCJjb250cm9sbGVyQXMiLCJsb2dpblNlcnZpY2UiLCJuYXZpZ2F0aW9uU2VydmljZSIsInJvb21TZXJ2aWNlIiwiJG9uSW5pdCIsImlzSXRlbUFjdGl2ZSIsInZpZXdMb2NhdGlvbiIsIndlbGNvbWVJdGVtIiwidXJsIiwicm9vbSIsIml0ZW1Ub0FkZCIsInN0YXJ0VGltZSIsIkRhdGUiLCJzZXRIb3VycyIsImVuZFRpbWUiLCJyZXNlcnZlUmVhc29ucyIsIm1hc3RlciIsInJvb21TdWJtaXNzaW9uIiwiYWxlcnQiLCJteUZvcm0iLCIkaW52YWxpZCJdLCJtYXBwaW5ncyI6IkFBQUEsY0NBRSxTQUFTQSxHQUNWQSxFQUNFQyxPQUFPLGVBQWdCLFlBQ3ZCQyxRQUFBQSxvQkFBQUEsaUJBQU8sU0FBU0MsRUFBbUJDLEdBQ25DRCxFQUFrQkUsV0FBVSxHQUU1QkQsRUFDR0UsS0FBSyxVQUNMQyxZQUFpQiwyQ0FJakJELEtBQUssYUFDTEUsU0FBaUIsc0JB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QSxjQUEyQixTQUFVc0IsR0FDN0M5QyxLQUFLK0MsUUFBVSxXQUNYL0MsS0FBSzhDLFlBQWNBLEVBRW5COUMsS0FBS3NELFVBQVksR0FBSUMsTUFDckJ2RCxLQUFLc0QsVUFBVUUsU0FBUyxFQUFHLEVBQUcsRUFBRyxHQUVqQ3hELEtBQUt5RCxRQUFVLEdBQUlGLE1BQ25CdkQsS0FBS3lELFFBQVFELFNBQVMsRUFBRyxFQUFHLEVBQUcsR0FFL0J4RCxLQUFLMEQsZ0JBQ0QsV0FDQSxhQUNBLFlBQ0EsZ0JBQ0EsYUFHSjFELEtBQUsyRCxXQUdUM0QsS0FBSzRELGVBQWlCLFdBSWxCLE1BSEE5QyxTQUFRQyxJQUFJLFFBQVNmLEtBQUtzRCxXQUMxQnhDLFFBQVFDLElBQUksTUFBT2YsS0FBS3lELFNBRXBCekQsS0FBS3NELFdBQWF0RCxLQUFLeUQsUUFBZ0JJLE1BQU0seUNBRTdDN0QsS0FBSzhELE9BQU9DLFNBQWlCRixNQUFNLDZDQUV2Q0EsT0FBTSx1QkFHcEI5RSxPQUFPWCxTQ3BDUCxTQUFTQSxHQUNUQSxFQUNHQyxPQUFPLGVBQ1BtRCxXQUFXLG1CQUFBLGVBQW1CLFNBQVNvQixHQUN0QzVDLEtBQUs0QyxhQUFlQSxNQUV4QjdELE9BQU9YIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIiwgW1wibmdSb3V0ZVwiXSkuY29uZmlnKGZ1bmN0aW9uICgkbG9jYXRpb25Qcm92aWRlciwgJHJvdXRlUHJvdmlkZXIpIHtcblx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cblx0XHQkcm91dGVQcm92aWRlci53aGVuKFwiL2xvZ2luXCIsIHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnd3d3L2FwcC9yb3V0ZXMvbG9naW5wYWdlL2xvZ2lucGFnZS5odG0nXG5cdFx0fSkud2hlbihcIi9yb29tLzppZFwiLCB7XG5cdFx0XHR0ZW1wbGF0ZTogJzxyLXJvb20+PC9yLXJvb20+J1xuXHRcdH0pLndoZW4oXCIvd2VsY29tZVwiLCB7XG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3d3dy9hcHAvcm91dGVzL3dlbGNvbWUvd2VsY29tZS5odG0nXG5cdFx0fSkub3RoZXJ3aXNlKHtcblx0XHRcdHJlZGlyZWN0VG86IFwiL3dlbGNvbWVcIlxuXHRcdH0pO1xuXHR9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmZhY3RvcnkoXCJuYXZpZ2F0aW9uU2VydmljZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXROYXZpZ2F0aW9uOiBnZXROYXZpZ2F0aW9uLFxuICAgICAgICAgICAgYWRkTmF2aWdhdGlvbkl0ZW06IGFkZE5hdmlnYXRpb25JdGVtLFxuICAgICAgICAgICAgcmVtb3ZlTmF2aWdhdGlvbkl0ZW06IHJlbW92ZU5hdmlnYXRpb25JdGVtXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG5hdmlnYXRpb25JdGVtcyA9IFtdO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldE5hdmlnYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbmF2aWdhdGlvbkl0ZW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkTmF2aWdhdGlvbkl0ZW0oaXRlbSkge1xuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0aW9uSXRlbXMpIG5hdmlnYXRpb25JdGVtcyA9IFtdO1xuICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVOYXZpZ2F0aW9uSXRlbShpdGVtKSB7XG4gICAgICAgICAgICBuYXZpZ2F0aW9uSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbUluTmF2aWdhdGlvbiwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbUluTmF2aWdhdGlvbi5pZCA9PT0gaXRlbS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLnNlcnZpY2UoXCJsb2dpblNlcnZpY2VcIiwgZnVuY3Rpb24gKCRsb2NhdGlvbikge1xuICAgIC8vIHB1YmxpYyBBUElcbiAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xuICAgIHRoaXMubG9naW4gPSBfbG9naW47XG4gICAgdGhpcy5sb2dvdXQgPSBfbG9nb3V0O1xuICAgIHRoaXMuaXNMb2dnZWRJbiA9IF9pc0xvZ2dlZEluO1xuXG4gICAgLy8gRk9STSBDUkVBVElPTiBBTkQgVkFMSURBVElPTiBJTlNUUlVDVElPTlNcbiAgICAvLyB5b3UgbXVzdCBuYW1lIGEgZm9ybSBmb3IgYW5ndWxhciB0byByZWNvZ25pemUgaXQgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIC4uLj5cbiAgICAvLyB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgXCJub3ZhbGlkYXRlXCIuIHRoaXMgdHVybnMgb2ZmIHlvdXIgYnJvd3NlcidzIHZhbGlkYXRpb24uIGl0IHdpbGwgY29uZmxpY3Qgd2l0aCBhbmd1bGFyJ3MgdmFsaWRhdGlvbi5cbiAgICAvLyA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbm92YWxpZGF0ZSAuLi4+XG4gICAgLy8gb24geW91ciBmb3JtJ3MgaW5wdXRzLCB5b3UgbXVzdCBpbmNsdWRlIG5nLW1vZGVsIGFuZCBuYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJmaXJzdE5hbWVcIiBuYW1lPVwibXlGb3JtLmZpcnN0LW5hbWUgXCIuLi4+XG4gICAgLy8geW91ciBmb3JtJ3Mgc3VibWl0IGJ1dHRvbiBzaG91bGQgdXNlIG5nLXN1Ym1pdC5cbiAgICAvLyB0byB2YWxpZGF0ZSBhbiBlbWFpbDogbmctY2xhc3M9XCJ7ICdlcnJvcic6IG15Rm9ybS5lbWFpbEFkZHJlc3MuJGludmFsaWQgfVwiXG5cbiAgICAvLyBpbXBsZW1lbnRhdGlvblxuICAgIGZ1bmN0aW9uIF9sb2dpbihpbnB1dE5hbWUpIHtcbiAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyID0ge1xuICAgICAgICBuYW1lOiBpbnB1dE5hbWVcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuaW5wdXROYW1lID0gbnVsbDtcblxuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9yb29tcycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9sb2dvdXQoKSB7XG4gICAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xuXG4gICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfaXNMb2dnZWRJbigpIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmxvZ2dlZEluVXNlcikubGVuZ3RoID4gMDtcbiAgICB9XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuZmFjdG9yeShcInJvb21TZXJ2aWNlXCIsIGZ1bmN0aW9uICgkbG9jYXRpb24sICRyb3V0ZVBhcmFtcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0Um9vbXM6IGdldFJvb21zLFxuICAgICAgICAgICAgZ2V0Um9vbUJ5SWQ6IGdldFJvb21CeUlkLFxuICAgICAgICAgICAgZmV0Y2hSb29tc0Zyb21EQjogZmV0Y2hSb29tc0Zyb21EQlxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByb29tcyA9IG51bGw7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Um9vbXMoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImdldFJvb21zIGlzOiBcIiwgZ2V0Um9vbXMpO1xuICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Um9vbUJ5SWQoKSB7XG4gICAgICAgICAgICB2YXIgcm9vbXNBcnJheSA9IFtdO1xuICAgICAgICAgICAgdmFyIG15Um9vbSA9IFwiXCI7XG4gICAgICAgICAgICByb29tc0FycmF5LnB1c2gocm9vbXMpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvb21zQXJyYXlbMF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAocm9vbXNBcnJheVswXVtpXS5pZCA9PT0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLmlkLCAxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbXlSb29tID0gcm9vbXNBcnJheVswXVtpXS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBteVJvb207XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmZXRjaFJvb21zRnJvbURCKCkge1xuICAgICAgICAgICAgcm9vbXMgPSBbe1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiRG9ua2V5IEtvbmdcIixcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvZGsuanBnJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiU29uaWNcIixcbiAgICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvc29uaWMuanBnJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiWmVsZGFcIixcbiAgICAgICAgICAgICAgICBpZDogMyxcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvemVsZGEuanBnJ1xuICAgICAgICAgICAgfV07XG5cbiAgICAgICAgICAgIHJldHVybiByb29tcztcbiAgICAgICAgfVxuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJleGVyY2lzZU9uZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZVBhcmFtcywgZXMpIHtcbiAgICAvLyBpbmplY3RcbiAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxuXG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJleGVyY2lzZVR3b0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZVBhcmFtcywgZXMpIHtcbiAgICAvLyBpbmplY3RcbiAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxuXG5cbiAgICB0aGlzLnRpdGxlID0gXCJFeGVyY2lzZSAyXCI7XG5cbiAgICB2YXIgX3Bvc3NpYmxlQ29sb3JzID0gW3tcbiAgICAgIG5hbWU6IFwiQnJvd25cIixcbiAgICAgIGhleDogXCIjQTUyQTJBXCJcbiAgICB9LCB7XG4gICAgICBuYW1lOiBcIkJsdWVcIixcbiAgICAgIGhleDogXCIjMDAwMEZGXCJcbiAgICB9LCB7XG4gICAgICBuYW1lOiBcIkdhaW5zYm9yb1wiLFxuICAgICAgaGV4OiBcIiNEQ0RDRENcIlxuICAgIH1dO1xuXG4gICAgZnVuY3Rpb24gX2dldFJhbmRvbUNvbG9yRnJvbUNvbGxlY3Rpb24oKSB7XG4gICAgICB2YXIgcmFuZG9tQ29sb3IgPSBfcG9zc2libGVDb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogX3Bvc3NpYmxlQ29sb3JzLmxlbmd0aCldO1xuXG4gICAgICByZXR1cm4gcmFuZG9tQ29sb3I7XG4gICAgfVxuXG4gICAgdGhpcy5vYmplY3RBcnJheSA9IFtdO1xuXG4gICAgdGhpcy5fY3JlYXRlT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJldHVybk9iamVjdCA9IHtcbiAgICAgICAgbmFtZTogXCJPYmpcIiArICh0aGlzLm9iamVjdEFycmF5Lmxlbmd0aCArIDEpLFxuICAgICAgICBjbGlja0NvdW50OiAwLFxuICAgICAgICBjb2xvcjogX2dldFJhbmRvbUNvbG9yRnJvbUNvbGxlY3Rpb24oKVxuICAgICAgfTtcbiAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG4gICAgfTtcblxuICAgIHRoaXMuY29udHJvbGxlckluaXRPYmplY3QgPSB0aGlzLm9iamVjdEFycmF5O1xuXG4gICAgdGhpcy5hZGROZXdPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm9iamVjdEFycmF5LnB1c2godGhpcy5fY3JlYXRlT2JqZWN0KCkpO1xuICAgIH07XG5cbiAgICB2YXIgb3JpZ2luYWxCdXR0b25UZXh0ID0gXCJCdXR0b24gdGV4dFwiO1xuXG4gICAgdGhpcy5idXR0b25UZXh0ID0gb3JpZ2luYWxCdXR0b25UZXh0O1xuXG4gICAgdGhpcy5idXR0b25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5idXR0b25UZXh0ID0gXCJSb2xsZWQgb3ZlclwiO1xuICAgIH07XG5cbiAgICB0aGlzLmJ1dHRvblJlc2V0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XG4gICAgfTtcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJuYXZpZ2F0aW9uQ29udHJvbGxlclwiLFxuICAgIGNvbnRyb2xsZXJBczogXCJjdHJsXCJcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcIm5hdmlnYXRpb25Db250cm9sbGVyXCIsIGZ1bmN0aW9uICgkbG9jYXRpb24sIGxvZ2luU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XG4gICAgdGhpcy4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gYWRkIHRvIGVhY2ggY29udHJvbGxlclxuICAgICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7XG4gICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlID0gbmF2aWdhdGlvblNlcnZpY2U7XG4gICAgICB0aGlzLnJvb21TZXJ2aWNlID0gcm9vbVNlcnZpY2U7XG4gICAgICB0aGlzLmlzSXRlbUFjdGl2ZSA9IGlzSXRlbUFjdGl2ZTtcblxuICAgICAgLy8gYWRkIHdlbGNvbWUgbGlua1xuICAgICAgdmFyIHdlbGNvbWVJdGVtID0ge1xuICAgICAgICB0aXRsZTogXCJXZWxjb21lXCIsXG4gICAgICAgIHVybDogXCIvd2VsY29tZVwiXG4gICAgICB9O1xuXG4gICAgICBuYXZpZ2F0aW9uU2VydmljZS5hZGROYXZpZ2F0aW9uSXRlbSh3ZWxjb21lSXRlbSk7XG5cbiAgICAgIC8vIGFkZCByb29tIGxpbmtzXG4gICAgICAvLyB0aGlzIGlzIHN5bmNocm9ub3VzIGZvciBub3dcbiAgICAgIHZhciByb29tcyA9IHJvb21TZXJ2aWNlLmZldGNoUm9vbXNGcm9tREIoKTtcblxuICAgICAgcm9vbXMuZm9yRWFjaChmdW5jdGlvbiAocm9vbSkge1xuICAgICAgICB2YXIgaXRlbVRvQWRkID0ge1xuICAgICAgICAgIHRpdGxlOiByb29tLm5hbWUsXG4gICAgICAgICAgdXJsOiBcIi9yb29tL1wiICsgcm9vbS5pZFxuICAgICAgICB9O1xuXG4gICAgICAgIG5hdmlnYXRpb25TZXJ2aWNlLmFkZE5hdmlnYXRpb25JdGVtKGl0ZW1Ub0FkZCk7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gaXNJdGVtQWN0aXZlKHZpZXdMb2NhdGlvbikge1xuICAgICAgICByZXR1cm4gdmlld0xvY2F0aW9uID09PSAkbG9jYXRpb24ucGF0aCgpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcImd3TG9naW5cIiwge1xuICAgIHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1cIixcbiAgICBjb250cm9sbGVyOiBcImxvZ2luQ29tcG9uZW50Q29udHJvbGxlclwiLFxuICAgIGNvbnRyb2xsZXJBczogXCJjdHJsXCJcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcImxvZ2luQ29tcG9uZW50Q29udHJvbGxlclwiLCBmdW5jdGlvbiAobG9naW5TZXJ2aWNlKSB7XG4gICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbXBvbmVudChcInJSb29tXCIsIHtcbiAgICB0ZW1wbGF0ZVVybDogXCJ3d3cvYXBwL2NvbXBvbmVudHMvcm9vbXMvcm9vbS5odG1cIixcbiAgICBjb250cm9sbGVyOiBcInJvb21Db21wb25lbnRDb250cm9sbGVyXCIsXG4gICAgY29udHJvbGxlckFzOiBcImN0cmxcIlxuICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICAgICAgICAgICAgICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJyb29tQ29tcG9uZW50Q29udHJvbGxlclwiLCBmdW5jdGlvbiAocm9vbVNlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb29tU2VydmljZSA9IHJvb21TZXJ2aWNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNlcnZlUmVhc29ucyA9IFtcIkJpcnRoZGF5XCIsIFwiQ29uZmVyZW5jZVwiLCBcIkludGVydmlld1wiLCBcIlNjcnVtIE1lZXRpbmdcIiwgXCJIb25leW1vb25cIl07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFzdGVyID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb29tU3VibWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnRcIiwgdGhpcy5zdGFydFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlbmRcIiwgdGhpcy5lbmRUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lID49IHRoaXMuZW5kVGltZSkgcmV0dXJuIGFsZXJ0KFwiTWVzc2FnZSBmcm9tIGNvbnRyb2xsZXI6IHRpbWUgaW52YWxpZFwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubXlGb3JtLiRpbnZhbGlkKSByZXR1cm4gYWxlcnQoXCJNZXNzYWdlIGZyb20gY29udHJvbGxlcjogZm9ybSBpbnZhbGlkXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIlJvb20gc3VibWl0dGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJyb29tc0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKGxvZ2luU2VydmljZSkge1xuICAgIHRoaXMubG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlO1xuICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTsiLCIoIGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiYXBwbGljYXRpb25cIiwgW1wibmdSb3V0ZVwiXSlcclxuXHRcdC5jb25maWcoZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIsICRyb3V0ZVByb3ZpZGVyKSB7XHJcblx0XHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuXHJcblx0XHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdFx0XHQud2hlbihcIi9sb2dpblwiLCB7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsICAgIDogJ3d3dy9hcHAvcm91dGVzL2xvZ2lucGFnZS9sb2dpbnBhZ2UuaHRtJyxcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyICAgOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyQXMgOiBcImN0cmxcIixcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQud2hlbihcIi9yb29tLzppZFwiLCB7XHJcblx0XHRcdFx0XHRcdHRlbXBsYXRlICAgICAgIDogJzxyLXJvb20+PC9yLXJvb20+JyxcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyICAgOiBcImNvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyQXMgOiBcImN0cmxcIixcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQud2hlbihcIi93ZWxjb21lXCIsIHtcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmwgICAgOiAnd3d3L2FwcC9yb3V0ZXMvd2VsY29tZS93ZWxjb21lLmh0bScsXHJcblx0XHRcdFx0XHRcdC8vY29udHJvbGxlciAgIDogXCJjb250cm9sbGVyXCIsXHJcblx0XHRcdFx0XHRcdC8vY29udHJvbGxlckFzIDogXCJjdHJsXCIsXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0Lm90aGVyd2lzZSh7XHJcblx0XHRcdFx0XHRcdHJlZGlyZWN0VG86XCIvd2VsY29tZVwiXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG59ICh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cclxuICAgICAgICAuZmFjdG9yeShcIm5hdmlnYXRpb25TZXJ2aWNlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGdldE5hdmlnYXRpb24sXHJcbiAgICAgICAgICAgICAgICBhZGROYXZpZ2F0aW9uSXRlbSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZU5hdmlnYXRpb25JdGVtXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgbmF2aWdhdGlvbkl0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRpb25JdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkTmF2aWdhdGlvbkl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0aW9uSXRlbXMpIG5hdmlnYXRpb25JdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZU5hdmlnYXRpb25JdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25JdGVtcy5mb3JFYWNoKChpdGVtSW5OYXZpZ2F0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtSW5OYXZpZ2F0aW9uLmlkID09PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25JdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5zZXJ2aWNlKFwibG9naW5TZXJ2aWNlXCIsIGZ1bmN0aW9uKCRsb2NhdGlvbikge1xyXG4gICAgICAvLyBwdWJsaWMgQVBJXHJcbiAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyID0ge307XHJcbiAgICAgIHRoaXMubG9naW4gPSBfbG9naW47XHJcbiAgICAgIHRoaXMubG9nb3V0ID0gX2xvZ291dDtcclxuICAgICAgdGhpcy5pc0xvZ2dlZEluID0gX2lzTG9nZ2VkSW47XHJcblxyXG5cclxuICAgICAgLy8gRk9STSBDUkVBVElPTiBBTkQgVkFMSURBVElPTiBJTlNUUlVDVElPTlNcclxuICAgICAgLy8geW91IG11c3QgbmFtZSBhIGZvcm0gZm9yIGFuZ3VsYXIgdG8gcmVjb2duaXplIGl0IDxmb3JtIG5hbWU9XCJteUZvcm1cIiAuLi4+XHJcbiAgICAgIC8vIHlvdSBtdXN0IGFsc28gaW5jbHVkZSBcIm5vdmFsaWRhdGVcIi4gdGhpcyB0dXJucyBvZmYgeW91ciBicm93c2VyJ3MgdmFsaWRhdGlvbi4gaXQgd2lsbCBjb25mbGljdCB3aXRoIGFuZ3VsYXIncyB2YWxpZGF0aW9uLlxyXG4gICAgICAvLyA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbm92YWxpZGF0ZSAuLi4+XHJcbiAgICAgIC8vIG9uIHlvdXIgZm9ybSdzIGlucHV0cywgeW91IG11c3QgaW5jbHVkZSBuZy1tb2RlbCBhbmQgbmFtZTogPGlucHV0IG5nLW1vZGVsPVwiZmlyc3ROYW1lXCIgbmFtZT1cIm15Rm9ybS5maXJzdC1uYW1lIFwiLi4uPlxyXG4gICAgICAvLyB5b3VyIGZvcm0ncyBzdWJtaXQgYnV0dG9uIHNob3VsZCB1c2Ugbmctc3VibWl0LlxyXG4gICAgICAvLyB0byB2YWxpZGF0ZSBhbiBlbWFpbDogbmctY2xhc3M9XCJ7ICdlcnJvcic6IG15Rm9ybS5lbWFpbEFkZHJlc3MuJGludmFsaWQgfVwiXHJcblxyXG4gICAgICAvLyBpbXBsZW1lbnRhdGlvblxyXG4gICAgICBmdW5jdGlvbiBfbG9naW4oaW5wdXROYW1lKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZWRJblVzZXIgPSB7XHJcbiAgICAgICAgICBuYW1lOiBpbnB1dE5hbWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0TmFtZSA9IG51bGw7XHJcblxyXG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvcm9vbXMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX2xvZ291dCgpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xyXG5cclxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX2lzTG9nZ2VkSW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubG9nZ2VkSW5Vc2VyKS5sZW5ndGggPiAwO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cclxuICAgICAgICAuZmFjdG9yeShcInJvb21TZXJ2aWNlXCIsIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBnZXRSb29tcyxcclxuICAgICAgICAgICAgICAgIGdldFJvb21CeUlkLFxyXG4gICAgICAgICAgICAgICAgZmV0Y2hSb29tc0Zyb21EQlxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IHJvb21zID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFJvb21zKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJnZXRSb29tcyBpczogXCIsIGdldFJvb21zKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByb29tcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Um9vbUJ5SWQoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcm9vbXNBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IG15Um9vbSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICByb29tc0FycmF5LnB1c2gocm9vbXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb29tc0FycmF5WzBdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocm9vbXNBcnJheVswXVtpXS5pZCA9PT0gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLmlkLCAxMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXlSb29tID0gcm9vbXNBcnJheVswXVtpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBteVJvb207XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZldGNoUm9vbXNGcm9tREIoKSB7XHJcbiAgICAgICAgICAgICAgICByb29tcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBcIkRvbmtleSBLb25nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkICAgICAgOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlIDogJy9hc3NldHMvaW1hZ2VzL2RrLmpwZydcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICA6IFwiU29uaWNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgICAgICA6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY3R1cmUgOiAnL2Fzc2V0cy9pbWFnZXMvc29uaWMuanBnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogXCJaZWxkYVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCAgICAgIDogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZSA6ICcvYXNzZXRzL2ltYWdlcy96ZWxkYS5qcGcnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5jb250cm9sbGVyKFwiZXhlcmNpc2VPbmVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCRyb3V0ZVBhcmFtcywgZXMpIHsgLy8gaW5qZWN0XHJcbiAgICAgIHRoaXMuZXMgPSBlczsgLy8gYXNzaWduaW5nIGVzIHRvIHRoZSBjb250cm9sbGVyIGFzIGEgbWVtYmVyXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29udHJvbGxlcihcImV4ZXJjaXNlVHdvQ29udHJvbGxlclwiLCBmdW5jdGlvbigkcm91dGVQYXJhbXMsIGVzKSB7IC8vIGluamVjdFxyXG4gICAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgdGhpcy50aXRsZSA9IFwiRXhlcmNpc2UgMlwiO1xyXG5cclxuICAgICAgY29uc3QgX3Bvc3NpYmxlQ29sb3JzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6IFwiQnJvd25cIixcclxuICAgICAgICAgIGhleDogXCIjQTUyQTJBXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6IFwiQmx1ZVwiLFxyXG4gICAgICAgICAgaGV4OiBcIiMwMDAwRkZcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJHYWluc2Jvcm9cIixcclxuICAgICAgICAgIGhleDogXCIjRENEQ0RDXCJcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmdW5jdGlvbiBfZ2V0UmFuZG9tQ29sb3JGcm9tQ29sbGVjdGlvbigpIHtcclxuICAgICAgICBjb25zdCByYW5kb21Db2xvciA9IF9wb3NzaWJsZUNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBfcG9zc2libGVDb2xvcnMubGVuZ3RoKV07XHJcblxyXG4gICAgICAgIHJldHVybiByYW5kb21Db2xvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vYmplY3RBcnJheSA9IFtdO1xyXG5cclxuICAgICAgdGhpcy5fY3JlYXRlT2JqZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuT2JqZWN0ID0ge1xyXG4gICAgICAgICAgbmFtZTogXCJPYmpcIiArICh0aGlzLm9iamVjdEFycmF5Lmxlbmd0aCArIDEpLFxyXG4gICAgICAgICAgY2xpY2tDb3VudDogMCxcclxuICAgICAgICAgIGNvbG9yOiBfZ2V0UmFuZG9tQ29sb3JGcm9tQ29sbGVjdGlvbigpXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmV0dXJuT2JqZWN0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5jb250cm9sbGVySW5pdE9iamVjdCA9IHRoaXMub2JqZWN0QXJyYXk7XHJcblxyXG4gICAgICB0aGlzLmFkZE5ld09iamVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMub2JqZWN0QXJyYXkucHVzaCh0aGlzLl9jcmVhdGVPYmplY3QoKSk7XHJcbiAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgIGxldCBvcmlnaW5hbEJ1dHRvblRleHQgPSBcIkJ1dHRvbiB0ZXh0XCI7XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvbk1vdXNlRW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSBcIlJvbGxlZCBvdmVyXCI7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvblJlc2V0Q2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm5hdmlnYXRpb25Db250cm9sbGVyXCIsXHJcbiAgICAgIGNvbnRyb2xsZXJBczogXCJjdHJsXCIsXHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoIGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5jb250cm9sbGVyKFwibmF2aWdhdGlvbkNvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJGxvY2F0aW9uLCBsb2dpblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG4gICAgICB0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHsgLy8gYWRkIHRvIGVhY2ggY29udHJvbGxlclxyXG4gICAgICAgIHRoaXMubG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcclxuICAgICAgICB0aGlzLnJvb21TZXJ2aWNlID0gcm9vbVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5pc0l0ZW1BY3RpdmUgPSBpc0l0ZW1BY3RpdmU7XHJcblxyXG4gICAgICAgIC8vIGFkZCB3ZWxjb21lIGxpbmtcclxuICAgICAgICBsZXQgd2VsY29tZUl0ZW0gPSB7XHJcbiAgICAgICAgICB0aXRsZTogXCJXZWxjb21lXCIsXHJcbiAgICAgICAgICB1cmwgIDogXCIvd2VsY29tZVwiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbmF2aWdhdGlvblNlcnZpY2UuYWRkTmF2aWdhdGlvbkl0ZW0od2VsY29tZUl0ZW0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgcm9vbSBsaW5rc1xyXG4gICAgICAgIC8vIHRoaXMgaXMgc3luY2hyb25vdXMgZm9yIG5vd1xyXG4gICAgICAgIGxldCByb29tcyA9IHJvb21TZXJ2aWNlLmZldGNoUm9vbXNGcm9tREIoKTtcclxuXHJcbiAgICAgICAgcm9vbXMuZm9yRWFjaChmdW5jdGlvbihyb29tKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtVG9BZGQgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlIDogcm9vbS5uYW1lLFxyXG4gICAgICAgICAgICB1cmwgICA6IGAvcm9vbS8ke3Jvb20uaWR9YFxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBuYXZpZ2F0aW9uU2VydmljZS5hZGROYXZpZ2F0aW9uSXRlbShpdGVtVG9BZGQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0l0ZW1BY3RpdmUodmlld0xvY2F0aW9uKSB7XHJcbiAgICAgICAgICByZXR1cm4gKHZpZXdMb2NhdGlvbiA9PT0gJGxvY2F0aW9uLnBhdGgoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29tcG9uZW50KFwiZ3dMb2dpblwiLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1cIixcclxuICAgICAgY29udHJvbGxlcjogXCJsb2dpbkNvbXBvbmVudENvbnRyb2xsZXJcIixcclxuICAgICAgY29udHJvbGxlckFzOiBcImN0cmxcIixcclxuICAgIH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIiggZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG4gICAgLmNvbnRyb2xsZXIoXCJsb2dpbkNvbXBvbmVudENvbnRyb2xsZXJcIiwgZnVuY3Rpb24obG9naW5TZXJ2aWNlKSB7XHJcbiAgICAgIHRoaXMubG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlO1xyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29tcG9uZW50KFwiclJvb21cIiwge1xyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJ3d3cvYXBwL2NvbXBvbmVudHMvcm9vbXMvcm9vbS5odG1cIixcclxuICAgICAgY29udHJvbGxlcjogXCJyb29tQ29tcG9uZW50Q29udHJvbGxlclwiLFxyXG4gICAgICBjb250cm9sbGVyQXM6IFwiY3RybFwiLFxyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcblxyXG4gICAgICAgIC5jb250cm9sbGVyKFwicm9vbUNvbXBvbmVudENvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKHJvb21TZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb29tU2VydmljZSA9IHJvb21TZXJ2aWNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNlcnZlUmVhc29ucyA9IFtcclxuICAgICAgICAgICAgICAgICAgICBcIkJpcnRoZGF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb25mZXJlbmNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJJbnRlcnZpZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBcIlNjcnVtIE1lZXRpbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBcIkhvbmV5bW9vblwiXHJcbiAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubWFzdGVyID0ge307XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvb21TdWJtaXNzaW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0XCIsIHRoaXMuc3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZW5kXCIsIHRoaXMuZW5kVGltZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lID49IHRoaXMuZW5kVGltZSkgcmV0dXJuIGFsZXJ0KFwiTWVzc2FnZSBmcm9tIGNvbnRyb2xsZXI6IHRpbWUgaW52YWxpZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5teUZvcm0uJGludmFsaWQpIHJldHVybiBhbGVydChcIk1lc3NhZ2UgZnJvbSBjb250cm9sbGVyOiBmb3JtIGludmFsaWRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJSb29tIHN1Ym1pdHRlZFwiKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoIGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5jb250cm9sbGVyKFwicm9vbXNDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGxvZ2luU2VydmljZSkge1xyXG4gICAgICB0aGlzLmxvZ2luU2VydmljZSA9IGxvZ2luU2VydmljZTtcclxuICAgIH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiJdfQ==
