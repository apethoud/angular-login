"use strict";!function(o){o.module("application",["ngRoute"]).config(["$locationProvider","$routeProvider",function(o,n){o.html5Mode(!0),n.when("/login",{templateUrl:"www/app/routes/loginpage/loginpage.htm"}).when("/rooms",{templateUrl:"www/app/routes/rooms/rooms.htm",controller:"roomsController",controllerAs:"ctrl"}).when("/welcome",{templateUrl:"www/app/routes/welcome/welcome.htm"}).otherwise({redirectTo:"/welcome"})}])}(window.angular),function(o){o.module("application").service("loginService",["$location",function(o){function n(n){this.loggedInUser={name:n},this.inputName=null,o.path("/rooms")}function t(){this.loggedInUser={},o.path("/welcome")}function e(){return Object.keys(this.loggedInUser).length>0}this.loggedInUser={},this.login=n,this.logout=t,this.isLoggedIn=e}])}(window.angular),function(o){o.module("application").service("navUpdateService",["$location",function(o){function n(n){return n===o.path()}this.updateActive=n}])}(window.angular),function(o){o.module("application").factory("navigationService",function(){function o(){return console.log("running getNavigation and navigationItems is: ",e),e}function n(o){e||(e=[]),e.push(o)}function t(o){e.forEach(function(n,t){n.id===o.id&&e.splice(t,1)})}return{getNavigation:o,addNavigationItem:n,removeNavigationItem:t};var e})}(window.angular),function(o){o.module("application").factory("roomService",function(){function o(){return e}function n(o){}function t(){return e=[{name:"Donkey Kong",id:1,picture:"/assets/images/dk.jpg"},{name:"Sonic",id:2,picture:"/assets/images/sonic.jpg"},{name:"Zelda",id:3,picture:"/assets/images/zelda.jpg"}]}return{getRooms:o,getRoomById:n,fetchRoomsFromDB:t};var e})}(window.angular),function(o){o.module("application").controller("exerciseOneController",["$routeParams","es",function(o,n){this.es=n}])}(window.angular),function(o){o.module("application").controller("exerciseTwoController",["$routeParams","es",function(o,n){function t(){return e[Math.floor(Math.random()*e.length)]}this.es=n,this.title="Exercise 2";var e=[{name:"Brown",hex:"#A52A2A"},{name:"Blue",hex:"#0000FF"},{name:"Gainsboro",hex:"#DCDCDC"}];this.objectArray=[],this._createObject=function(){return{name:"Obj"+(this.objectArray.length+1),clickCount:0,color:t()}},this.controllerInitObject=this.objectArray,this.addNewObject=function(){this.objectArray.push(this._createObject())};this.buttonText="Button text",this.buttonMouseEnter=function(){this.buttonText="Rolled over"},this.buttonResetClick=function(){this.buttonText="Button text"}}])}(window.angular),function(o){o.module("application").component("gwLogin",{templateUrl:"www/app/components/login/login.htm",controller:"loginComponentController",controllerAs:"ctrl"})}(window.angular),function(o){o.module("application").controller("loginComponentController",["loginService",function(o){this.loginService=o}])}(window.angular),function(o){o.module("application").component("navigation",{templateUrl:"www/app/components/navigation/navigation.html",controller:"navigationController",controllerAs:"ctrl"})}(window.angular),function(o){o.module("application").controller("navigationController",["$location","loginService","navigationService","roomService",function(o,n,t,e){this.$onInit=function(){this.loginService=n,this.navigationService=t,this.roomService=e;var o={title:"Welcome",url:"/welcome"};t.addNavigationItem(o),e.fetchRoomsFromDB().forEach(function(o){var n={title:o.name,url:"/room/"+o.id};t.addNavigationItem(n)});var i={title:"Login",url:"/login"};t.addNavigationItem(i)}}])}(window.angular),function(o){o.module("application").controller("roomComponentController",function(){this.$onInit=function(){this.startTime=new Date,this.startTime.setHours(0,0,0,0),this.endTime=new Date,this.endTime.setHours(0,0,0,0),this.reserveReasons=["Birthday","Conference","Interview","Scrum Meeting","Honeymoon"]},this.roomSubmission=function(){return console.log("start",this.startTime),console.log("end",this.endTime),this.startTime>=this.endTime?alert("Message from controller: time invalid"):this.myForm.$invalid?alert("Message from controller: form invalid"):void alert("Room submitted")}})}(window.angular),function(o){o.module("application").controller("roomsController",["loginService",function(o){this.loginService=o}])}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJpbmRleC5qcyIsImNvbXBvbmVudHMvbG9naW4vbG9naW4uc2VydmljZS5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXYtdXBkYXRlLnNlcnZpY2UuanMiLCJjb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9yb29tcy9yb29tLnNlcnZpY2UuanMiLCJjb250cm9sbGVycy9leGVyY2lzZU9uZUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9leGVyY2lzZVR3b0NvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2xvZ2luL2xvZ2luLmNvbXBvbmVudC5qcyIsImNvbXBvbmVudHMvbG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5qcyIsImNvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL3Jvb21zL3Jvb20uY29udHJvbGxlci5qcyIsInJvdXRlcy9yb29tcy9yb29tcy5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRyb3V0ZVByb3ZpZGVyIiwiaHRtbDVNb2RlIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJ3aW5kb3ciLCJzZXJ2aWNlIiwiJGxvY2F0aW9uIiwiX2xvZ2luIiwiaW5wdXROYW1lIiwidGhpcyIsImxvZ2dlZEluVXNlciIsIm5hbWUiLCJwYXRoIiwiX2xvZ291dCIsIl9pc0xvZ2dlZEluIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImxvZ2luIiwibG9nb3V0IiwiaXNMb2dnZWRJbiIsIl91cGRhdGVBY3RpdmUiLCJ2aWV3TG9jYXRpb24iLCJ1cGRhdGVBY3RpdmUiLCJmYWN0b3J5IiwiZ2V0TmF2aWdhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJuYXZpZ2F0aW9uSXRlbXMiLCJhZGROYXZpZ2F0aW9uSXRlbSIsIml0ZW0iLCJwdXNoIiwicmVtb3ZlTmF2aWdhdGlvbkl0ZW0iLCJmb3JFYWNoIiwiaXRlbUluTmF2aWdhdGlvbiIsImluZGV4IiwiaWQiLCJzcGxpY2UiLCJnZXRSb29tcyIsInJvb21zIiwiZ2V0Um9vbUJ5SWQiLCJmZXRjaFJvb21zRnJvbURCIiwicGljdHVyZSIsIiRyb3V0ZVBhcmFtcyIsImVzIiwiX2dldFJhbmRvbUNvbG9yRnJvbUNvbGxlY3Rpb24iLCJfcG9zc2libGVDb2xvcnMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0aXRsZSIsImhleCIsIm9iamVjdEFycmF5IiwiX2NyZWF0ZU9iamVjdCIsImNsaWNrQ291bnQiLCJjb2xvciIsImNvbnRyb2xsZXJJbml0T2JqZWN0IiwiYWRkTmV3T2JqZWN0IiwiYnV0dG9uVGV4dCIsImJ1dHRvbk1vdXNlRW50ZXIiLCJidXR0b25SZXNldENsaWNrIiwiY29tcG9uZW50IiwibG9naW5TZXJ2aWNlIiwibmF2aWdhdGlvblNlcnZpY2UiLCJyb29tU2VydmljZSIsIiRvbkluaXQiLCJ3ZWxjb21lSXRlbSIsInVybCIsInJvb20iLCJpdGVtVG9BZGQiLCJsb2dpbkl0ZW0iLCJzdGFydFRpbWUiLCJEYXRlIiwic2V0SG91cnMiLCJlbmRUaW1lIiwicmVzZXJ2ZVJlYXNvbnMiLCJyb29tU3VibWlzc2lvbiIsImFsZXJ0IiwibXlGb3JtIiwiJGludmFsaWQiXSwibWFwcGluZ3MiOiJBQUFBLGNDQUUsU0FBU0EsR0FDVkEsRUFDRUMsT0FBTyxlQUFnQixZQUN2QkMsUUFBQUEsb0JBQUFBLGlCQUFPLFNBQVNDLEVBQW1CQyxHQUNuQ0QsRUFBa0JFLFdBQVUsR0FFNUJELEVBQ0dFLEtBQUssVUFDTEMsWUFBZSwyQ0FJZkQsS0FBSyxVQUNMQyxZQUFlLGlDQUNmQyxXQUFlLGtCQUNmQyxhQUFlLFNB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QSxhQUNBLFlBQ0EsZ0JBQ0EsY0FJUmxFLEtBQUttRSxlQUFpQixXQUlsQixNQUhBbEQsU0FBUUMsSUFBSSxRQUFTbEIsS0FBSzhELFdBQzFCN0MsUUFBUUMsSUFBSSxNQUFPbEIsS0FBS2lFLFNBRXBCakUsS0FBSzhELFdBQWE5RCxLQUFLaUUsUUFBZ0JHLE1BQU0seUNBRTdDcEUsS0FBS3FFLE9BQU9DLFNBQWlCRixNQUFNLDZDQUV2Q0EsT0FBTSxzQkFHcEJ6RSxPQUFPWixTQ2hDUCxTQUFTQSxHQUNUQSxFQUNHQyxPQUFPLGVBQ1BPLFdBQVcsbUJBQUEsZUFBbUIsU0FBUzhELEdBQ3RDckQsS0FBS3FELGFBQWVBLE1BRXhCMUQsT0FBT1oiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcblx0YW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiLCBbXCJuZ1JvdXRlXCJdKS5jb25maWcoZnVuY3Rpb24gKCRsb2NhdGlvblByb3ZpZGVyLCAkcm91dGVQcm92aWRlcikge1xuXHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuXHRcdCRyb3V0ZVByb3ZpZGVyLndoZW4oXCIvbG9naW5cIiwge1xuXHRcdFx0dGVtcGxhdGVVcmw6ICd3d3cvYXBwL3JvdXRlcy9sb2dpbnBhZ2UvbG9naW5wYWdlLmh0bSdcblx0XHR9KS53aGVuKFwiL3Jvb21zXCIsIHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnd3d3L2FwcC9yb3V0ZXMvcm9vbXMvcm9vbXMuaHRtJyxcblx0XHRcdGNvbnRyb2xsZXI6IFwicm9vbXNDb250cm9sbGVyXCIsXG5cdFx0XHRjb250cm9sbGVyQXM6IFwiY3RybFwiXG5cdFx0fSkud2hlbihcIi93ZWxjb21lXCIsIHtcblx0XHRcdHRlbXBsYXRlVXJsOiAnd3d3L2FwcC9yb3V0ZXMvd2VsY29tZS93ZWxjb21lLmh0bSdcblx0XHR9KS5vdGhlcndpc2Uoe1xuXHRcdFx0cmVkaXJlY3RUbzogXCIvd2VsY29tZVwiXG5cdFx0fSk7XG5cdH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLnNlcnZpY2UoXCJsb2dpblNlcnZpY2VcIiwgZnVuY3Rpb24gKCRsb2NhdGlvbikge1xuICAgIC8vIHB1YmxpYyBBUElcbiAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xuICAgIHRoaXMubG9naW4gPSBfbG9naW47XG4gICAgdGhpcy5sb2dvdXQgPSBfbG9nb3V0O1xuICAgIHRoaXMuaXNMb2dnZWRJbiA9IF9pc0xvZ2dlZEluO1xuXG4gICAgLy8gRk9STSBDUkVBVElPTiBBTkQgVkFMSURBVElPTiBJTlNUUlVDVElPTlNcbiAgICAvLyB5b3UgbXVzdCBuYW1lIGEgZm9ybSBmb3IgYW5ndWxhciB0byByZWNvZ25pemUgaXQgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIC4uLj5cbiAgICAvLyB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgXCJub3ZhbGlkYXRlXCIuIHRoaXMgdHVybnMgb2ZmIHlvdXIgYnJvd3NlcidzIHZhbGlkYXRpb24uIGl0IHdpbGwgY29uZmxpY3Qgd2l0aCBhbmd1bGFyJ3MgdmFsaWRhdGlvbi5cbiAgICAvLyA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbm92YWxpZGF0ZSAuLi4+XG4gICAgLy8gb24geW91ciBmb3JtJ3MgaW5wdXRzLCB5b3UgbXVzdCBpbmNsdWRlIG5nLW1vZGVsIGFuZCBuYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJmaXJzdE5hbWVcIiBuYW1lPVwibXlGb3JtLmZpcnN0LW5hbWUgXCIuLi4+XG4gICAgLy8geW91ciBmb3JtJ3Mgc3VibWl0IGJ1dHRvbiBzaG91bGQgdXNlIG5nLXN1Ym1pdC5cbiAgICAvLyB0byB2YWxpZGF0ZSBhbiBlbWFpbDogbmctY2xhc3M9XCJ7ICdlcnJvcic6IG15Rm9ybS5lbWFpbEFkZHJlc3MuJGludmFsaWQgfVwiXG5cbiAgICAvLyBpbXBsZW1lbnRhdGlvblxuICAgIGZ1bmN0aW9uIF9sb2dpbihpbnB1dE5hbWUpIHtcbiAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyID0ge1xuICAgICAgICBuYW1lOiBpbnB1dE5hbWVcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuaW5wdXROYW1lID0gbnVsbDtcblxuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9yb29tcycpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9sb2dvdXQoKSB7XG4gICAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xuXG4gICAgICAkbG9jYXRpb24ucGF0aCgnL3dlbGNvbWUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfaXNMb2dnZWRJbigpIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmxvZ2dlZEluVXNlcikubGVuZ3RoID4gMDtcbiAgICB9XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLnNlcnZpY2UoXCJuYXZVcGRhdGVTZXJ2aWNlXCIsIGZ1bmN0aW9uICgkbG9jYXRpb24pIHtcbiAgICAvLyBwdWJsaWMgQVBJXG4gICAgdGhpcy51cGRhdGVBY3RpdmUgPSBfdXBkYXRlQWN0aXZlO1xuXG4gICAgLy8gaW1wbGVtZW50YXRpb25cbiAgICBmdW5jdGlvbiBfdXBkYXRlQWN0aXZlKHZpZXdMb2NhdGlvbikge1xuICAgICAgcmV0dXJuIHZpZXdMb2NhdGlvbiA9PT0gJGxvY2F0aW9uLnBhdGgoKTtcbiAgICB9XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuZmFjdG9yeShcIm5hdmlnYXRpb25TZXJ2aWNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldE5hdmlnYXRpb246IGdldE5hdmlnYXRpb24sXG4gICAgICAgICAgICBhZGROYXZpZ2F0aW9uSXRlbTogYWRkTmF2aWdhdGlvbkl0ZW0sXG4gICAgICAgICAgICByZW1vdmVOYXZpZ2F0aW9uSXRlbTogcmVtb3ZlTmF2aWdhdGlvbkl0ZW1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgbmF2aWdhdGlvbkl0ZW1zID0gW107XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TmF2aWdhdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicnVubmluZyBnZXROYXZpZ2F0aW9uIGFuZCBuYXZpZ2F0aW9uSXRlbXMgaXM6IFwiLCBuYXZpZ2F0aW9uSXRlbXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRpb25JdGVtcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZE5hdmlnYXRpb25JdGVtKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmICghbmF2aWdhdGlvbkl0ZW1zKSBuYXZpZ2F0aW9uSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIG5hdmlnYXRpb25JdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTmF2aWdhdGlvbkl0ZW0oaXRlbSkge1xuICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW1Jbk5hdmlnYXRpb24sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1Jbk5hdmlnYXRpb24uaWQgPT09IGl0ZW0uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmZhY3RvcnkoXCJyb29tU2VydmljZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRSb29tczogZ2V0Um9vbXMsXG4gICAgICAgICAgICBnZXRSb29tQnlJZDogZ2V0Um9vbUJ5SWQsXG4gICAgICAgICAgICBmZXRjaFJvb21zRnJvbURCOiBmZXRjaFJvb21zRnJvbURCXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJvb21zID0gbnVsbDtcblxuICAgICAgICBmdW5jdGlvbiBnZXRSb29tcygpIHtcbiAgICAgICAgICAgIHJldHVybiByb29tcztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFJvb21CeUlkKGlkKSB7XG4gICAgICAgICAgICAvLyB0b2RvOiAgaW1wbGVtZW50XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmZXRjaFJvb21zRnJvbURCKCkge1xuICAgICAgICAgICAgcm9vbXMgPSBbe1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiRG9ua2V5IEtvbmdcIixcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvZGsuanBnJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiU29uaWNcIixcbiAgICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvc29uaWMuanBnJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiWmVsZGFcIixcbiAgICAgICAgICAgICAgICBpZDogMyxcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiAnL2Fzc2V0cy9pbWFnZXMvemVsZGEuanBnJ1xuICAgICAgICAgICAgfV07XG5cbiAgICAgICAgICAgIHJldHVybiByb29tcztcbiAgICAgICAgfVxuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJleGVyY2lzZU9uZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZVBhcmFtcywgZXMpIHtcbiAgICAvLyBpbmplY3RcbiAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxuXG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJleGVyY2lzZVR3b0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24gKCRyb3V0ZVBhcmFtcywgZXMpIHtcbiAgICAvLyBpbmplY3RcbiAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxuXG5cbiAgICB0aGlzLnRpdGxlID0gXCJFeGVyY2lzZSAyXCI7XG5cbiAgICB2YXIgX3Bvc3NpYmxlQ29sb3JzID0gW3tcbiAgICAgIG5hbWU6IFwiQnJvd25cIixcbiAgICAgIGhleDogXCIjQTUyQTJBXCJcbiAgICB9LCB7XG4gICAgICBuYW1lOiBcIkJsdWVcIixcbiAgICAgIGhleDogXCIjMDAwMEZGXCJcbiAgICB9LCB7XG4gICAgICBuYW1lOiBcIkdhaW5zYm9yb1wiLFxuICAgICAgaGV4OiBcIiNEQ0RDRENcIlxuICAgIH1dO1xuXG4gICAgZnVuY3Rpb24gX2dldFJhbmRvbUNvbG9yRnJvbUNvbGxlY3Rpb24oKSB7XG4gICAgICB2YXIgcmFuZG9tQ29sb3IgPSBfcG9zc2libGVDb2xvcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogX3Bvc3NpYmxlQ29sb3JzLmxlbmd0aCldO1xuXG4gICAgICByZXR1cm4gcmFuZG9tQ29sb3I7XG4gICAgfVxuXG4gICAgdGhpcy5vYmplY3RBcnJheSA9IFtdO1xuXG4gICAgdGhpcy5fY3JlYXRlT2JqZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJldHVybk9iamVjdCA9IHtcbiAgICAgICAgbmFtZTogXCJPYmpcIiArICh0aGlzLm9iamVjdEFycmF5Lmxlbmd0aCArIDEpLFxuICAgICAgICBjbGlja0NvdW50OiAwLFxuICAgICAgICBjb2xvcjogX2dldFJhbmRvbUNvbG9yRnJvbUNvbGxlY3Rpb24oKVxuICAgICAgfTtcbiAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG4gICAgfTtcblxuICAgIHRoaXMuY29udHJvbGxlckluaXRPYmplY3QgPSB0aGlzLm9iamVjdEFycmF5O1xuXG4gICAgdGhpcy5hZGROZXdPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm9iamVjdEFycmF5LnB1c2godGhpcy5fY3JlYXRlT2JqZWN0KCkpO1xuICAgIH07XG5cbiAgICB2YXIgb3JpZ2luYWxCdXR0b25UZXh0ID0gXCJCdXR0b24gdGV4dFwiO1xuXG4gICAgdGhpcy5idXR0b25UZXh0ID0gb3JpZ2luYWxCdXR0b25UZXh0O1xuXG4gICAgdGhpcy5idXR0b25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5idXR0b25UZXh0ID0gXCJSb2xsZWQgb3ZlclwiO1xuICAgIH07XG5cbiAgICB0aGlzLmJ1dHRvblJlc2V0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XG4gICAgfTtcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29tcG9uZW50KFwiZ3dMb2dpblwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL2xvZ2luL2xvZ2luLmh0bVwiLFxuICAgIGNvbnRyb2xsZXI6IFwibG9naW5Db21wb25lbnRDb250cm9sbGVyXCIsXG4gICAgY29udHJvbGxlckFzOiBcImN0cmxcIlxuICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKS5jb250cm9sbGVyKFwibG9naW5Db21wb25lbnRDb250cm9sbGVyXCIsIGZ1bmN0aW9uIChsb2dpblNlcnZpY2UpIHtcbiAgICB0aGlzLmxvZ2luU2VydmljZSA9IGxvZ2luU2VydmljZTtcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XG4gICAgdGVtcGxhdGVVcmw6IFwid3d3L2FwcC9jb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5odG1sXCIsXG4gICAgY29udHJvbGxlcjogXCJuYXZpZ2F0aW9uQ29udHJvbGxlclwiLFxuICAgIGNvbnRyb2xsZXJBczogXCJjdHJsXCJcbiAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcIm5hdmlnYXRpb25Db250cm9sbGVyXCIsIGZ1bmN0aW9uICgkbG9jYXRpb24sIGxvZ2luU2VydmljZSwgbmF2aWdhdGlvblNlcnZpY2UsIHJvb21TZXJ2aWNlKSB7XG4gICAgdGhpcy4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gYWRkIHRvIGVhY2ggY29udHJvbGxlclxuICAgICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7XG4gICAgICB0aGlzLm5hdmlnYXRpb25TZXJ2aWNlID0gbmF2aWdhdGlvblNlcnZpY2U7XG4gICAgICB0aGlzLnJvb21TZXJ2aWNlID0gcm9vbVNlcnZpY2U7XG5cbiAgICAgIC8vIGFkZCB3ZWxjb21lIGxpbmtcbiAgICAgIHZhciB3ZWxjb21lSXRlbSA9IHtcbiAgICAgICAgdGl0bGU6IFwiV2VsY29tZVwiLFxuICAgICAgICB1cmw6IFwiL3dlbGNvbWVcIlxuICAgICAgfTtcblxuICAgICAgbmF2aWdhdGlvblNlcnZpY2UuYWRkTmF2aWdhdGlvbkl0ZW0od2VsY29tZUl0ZW0pO1xuXG4gICAgICAvLyBhZGQgcm9vbSBsaW5rc1xuICAgICAgLy8gdGhpcyBpcyBzeW5jaHJvbm91cyBmb3Igbm93XG4gICAgICB2YXIgcm9vbXMgPSByb29tU2VydmljZS5mZXRjaFJvb21zRnJvbURCKCk7XG5cbiAgICAgIHJvb21zLmZvckVhY2goZnVuY3Rpb24gKHJvb20pIHtcbiAgICAgICAgdmFyIGl0ZW1Ub0FkZCA9IHtcbiAgICAgICAgICB0aXRsZTogcm9vbS5uYW1lLFxuICAgICAgICAgIHVybDogXCIvcm9vbS9cIiArIHJvb20uaWRcbiAgICAgICAgfTtcblxuICAgICAgICBuYXZpZ2F0aW9uU2VydmljZS5hZGROYXZpZ2F0aW9uSXRlbShpdGVtVG9BZGQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGFkZCBsb2dpbiBsaW5rXG4gICAgICB2YXIgbG9naW5JdGVtID0ge1xuICAgICAgICB0aXRsZTogXCJMb2dpblwiLFxuICAgICAgICB1cmw6IFwiL2xvZ2luXCJcbiAgICAgIH07XG5cbiAgICAgIG5hdmlnYXRpb25TZXJ2aWNlLmFkZE5hdmlnYXRpb25JdGVtKGxvZ2luSXRlbSk7XG5cbiAgICAgIGZ1bmN0aW9uIGlzSXRlbUFjdGl2ZSh2aWV3TG9jYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHZpZXdMb2NhdGlvbiA9PT0gJGxvY2F0aW9uLnBhdGgoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpLmNvbnRyb2xsZXIoXCJyb29tQ29tcG9uZW50Q29udHJvbGxlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5lbmRUaW1lLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAgICAgICB0aGlzLnJlc2VydmVSZWFzb25zID0gW1wiQmlydGhkYXlcIiwgXCJDb25mZXJlbmNlXCIsIFwiSW50ZXJ2aWV3XCIsIFwiU2NydW0gTWVldGluZ1wiLCBcIkhvbmV5bW9vblwiXTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJvb21TdWJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydFwiLCB0aGlzLnN0YXJ0VGltZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVuZFwiLCB0aGlzLmVuZFRpbWUpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydFRpbWUgPj0gdGhpcy5lbmRUaW1lKSByZXR1cm4gYWxlcnQoXCJNZXNzYWdlIGZyb20gY29udHJvbGxlcjogdGltZSBpbnZhbGlkXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5teUZvcm0uJGludmFsaWQpIHJldHVybiBhbGVydChcIk1lc3NhZ2UgZnJvbSBjb250cm9sbGVyOiBmb3JtIGludmFsaWRcIik7XG5cbiAgICAgICAgICAgIGFsZXJ0KFwiUm9vbSBzdWJtaXR0ZWRcIik7XG4gICAgICAgIH07XG4gICAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwiYXBwbGljYXRpb25cIikuY29udHJvbGxlcihcInJvb21zQ29udHJvbGxlclwiLCBmdW5jdGlvbiAobG9naW5TZXJ2aWNlKSB7XG4gICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7XG4gIH0pO1xufSkod2luZG93LmFuZ3VsYXIpOyIsIiggZnVuY3Rpb24oYW5ndWxhcikge1xyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiLCBbXCJuZ1JvdXRlXCJdKVxyXG5cdFx0LmNvbmZpZyhmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlciwgJHJvdXRlUHJvdmlkZXIpIHtcclxuXHRcdFx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG5cclxuXHRcdFx0JHJvdXRlUHJvdmlkZXJcclxuXHRcdFx0XHRcdC53aGVuKFwiL2xvZ2luXCIsIHtcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmwgIDogJ3d3dy9hcHAvcm91dGVzL2xvZ2lucGFnZS9sb2dpbnBhZ2UuaHRtJyxcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyICAgOiBcImV4ZXJjaXNlT25lQ29udHJvbGxlclwiLFxyXG5cdFx0XHRcdFx0XHQvL2NvbnRyb2xsZXJBcyA6IFwiY3RybFwiLFxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC53aGVuKFwiL3Jvb21zXCIsIHtcclxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmwgIDogJ3d3dy9hcHAvcm91dGVzL3Jvb21zL3Jvb21zLmh0bScsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXIgICA6IFwicm9vbXNDb250cm9sbGVyXCIsXHJcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBcyA6IFwiY3RybFwiLFxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC53aGVuKFwiL3dlbGNvbWVcIiwge1xyXG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybCAgOiAnd3d3L2FwcC9yb3V0ZXMvd2VsY29tZS93ZWxjb21lLmh0bScsXHJcblx0XHRcdFx0XHRcdC8vY29udHJvbGxlciAgIDogXCJyb29tc0NvbnRyb2xsZXJcIixcclxuXHRcdFx0XHRcdFx0Ly9jb250cm9sbGVyQXMgOiBcImN0cmxcIixcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQub3RoZXJ3aXNlKHtcclxuXHRcdFx0XHRcdFx0cmVkaXJlY3RUbzpcIi93ZWxjb21lXCJcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcbn0gKHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuc2VydmljZShcImxvZ2luU2VydmljZVwiLCBmdW5jdGlvbigkbG9jYXRpb24pIHtcclxuICAgICAgLy8gcHVibGljIEFQSVxyXG4gICAgICB0aGlzLmxvZ2dlZEluVXNlciA9IHt9O1xyXG4gICAgICB0aGlzLmxvZ2luID0gX2xvZ2luO1xyXG4gICAgICB0aGlzLmxvZ291dCA9IF9sb2dvdXQ7XHJcbiAgICAgIHRoaXMuaXNMb2dnZWRJbiA9IF9pc0xvZ2dlZEluO1xyXG5cclxuXHJcbiAgICAgIC8vIEZPUk0gQ1JFQVRJT04gQU5EIFZBTElEQVRJT04gSU5TVFJVQ1RJT05TXHJcbiAgICAgIC8vIHlvdSBtdXN0IG5hbWUgYSBmb3JtIGZvciBhbmd1bGFyIHRvIHJlY29nbml6ZSBpdCA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgLi4uPlxyXG4gICAgICAvLyB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgXCJub3ZhbGlkYXRlXCIuIHRoaXMgdHVybnMgb2ZmIHlvdXIgYnJvd3NlcidzIHZhbGlkYXRpb24uIGl0IHdpbGwgY29uZmxpY3Qgd2l0aCBhbmd1bGFyJ3MgdmFsaWRhdGlvbi5cclxuICAgICAgLy8gPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5vdmFsaWRhdGUgLi4uPlxyXG4gICAgICAvLyBvbiB5b3VyIGZvcm0ncyBpbnB1dHMsIHlvdSBtdXN0IGluY2x1ZGUgbmctbW9kZWwgYW5kIG5hbWU6IDxpbnB1dCBuZy1tb2RlbD1cImZpcnN0TmFtZVwiIG5hbWU9XCJteUZvcm0uZmlyc3QtbmFtZSBcIi4uLj5cclxuICAgICAgLy8geW91ciBmb3JtJ3Mgc3VibWl0IGJ1dHRvbiBzaG91bGQgdXNlIG5nLXN1Ym1pdC5cclxuICAgICAgLy8gdG8gdmFsaWRhdGUgYW4gZW1haWw6IG5nLWNsYXNzPVwieyAnZXJyb3InOiBteUZvcm0uZW1haWxBZGRyZXNzLiRpbnZhbGlkIH1cIlxyXG5cclxuICAgICAgLy8gaW1wbGVtZW50YXRpb25cclxuICAgICAgZnVuY3Rpb24gX2xvZ2luKGlucHV0TmFtZSkge1xyXG4gICAgICAgIHRoaXMubG9nZ2VkSW5Vc2VyID0ge1xyXG4gICAgICAgICAgbmFtZTogaW5wdXROYW1lXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dE5hbWUgPSBudWxsO1xyXG5cclxuICAgICAgICAkbG9jYXRpb24ucGF0aCgnL3Jvb21zJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9sb2dvdXQoKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZWRJblVzZXIgPSB7fTtcclxuXHJcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy93ZWxjb21lJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9pc0xvZ2dlZEluKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmxvZ2dlZEluVXNlcikubGVuZ3RoID4gMDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5zZXJ2aWNlKFwibmF2VXBkYXRlU2VydmljZVwiLCBmdW5jdGlvbigkbG9jYXRpb24pIHtcclxuICAgICAgLy8gcHVibGljIEFQSVxyXG4gICAgICB0aGlzLnVwZGF0ZUFjdGl2ZSA9IF91cGRhdGVBY3RpdmU7XHJcblxyXG4gICAgICAvLyBpbXBsZW1lbnRhdGlvblxyXG4gICAgICBmdW5jdGlvbiBfdXBkYXRlQWN0aXZlKHZpZXdMb2NhdGlvbikge1xyXG4gICAgICAgIHJldHVybiAodmlld0xvY2F0aW9uID09PSAkbG9jYXRpb24ucGF0aCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG5cclxuICAgICAgICAuZmFjdG9yeShcIm5hdmlnYXRpb25TZXJ2aWNlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGdldE5hdmlnYXRpb24sXHJcbiAgICAgICAgICAgICAgICBhZGROYXZpZ2F0aW9uSXRlbSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZU5hdmlnYXRpb25JdGVtXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgbmF2aWdhdGlvbkl0ZW1zID0gW107XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXROYXZpZ2F0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicnVubmluZyBnZXROYXZpZ2F0aW9uIGFuZCBuYXZpZ2F0aW9uSXRlbXMgaXM6IFwiLCBuYXZpZ2F0aW9uSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRpb25JdGVtcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYWRkTmF2aWdhdGlvbkl0ZW0oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0aW9uSXRlbXMpIG5hdmlnYXRpb25JdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZU5hdmlnYXRpb25JdGVtKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25JdGVtcy5mb3JFYWNoKChpdGVtSW5OYXZpZ2F0aW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtSW5OYXZpZ2F0aW9uLmlkID09PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25JdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHJcbiAgICAgICAgLmZhY3RvcnkoXCJyb29tU2VydmljZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGdldFJvb21zLFxyXG4gICAgICAgICAgICAgICAgZ2V0Um9vbUJ5SWQsXHJcbiAgICAgICAgICAgICAgICBmZXRjaFJvb21zRnJvbURCXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgcm9vbXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Um9vbXMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vbXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFJvb21CeUlkKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0b2RvOiAgaW1wbGVtZW50XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZldGNoUm9vbXNGcm9tREIoKSB7XHJcbiAgICAgICAgICAgICAgICByb29tcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgICAgOiBcIkRvbmtleSBLb25nXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkICAgICAgOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaWN0dXJlIDogJy9hc3NldHMvaW1hZ2VzL2RrLmpwZydcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSAgICA6IFwiU29uaWNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgICAgICA6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpY3R1cmUgOiAnL2Fzc2V0cy9pbWFnZXMvc29uaWMuanBnJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgIDogXCJaZWxkYVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCAgICAgIDogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGljdHVyZSA6ICcvYXNzZXRzL2ltYWdlcy96ZWxkYS5qcGcnXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb21zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5jb250cm9sbGVyKFwiZXhlcmNpc2VPbmVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCRyb3V0ZVBhcmFtcywgZXMpIHsgLy8gaW5qZWN0XHJcbiAgICAgIHRoaXMuZXMgPSBlczsgLy8gYXNzaWduaW5nIGVzIHRvIHRoZSBjb250cm9sbGVyIGFzIGEgbWVtYmVyXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIihmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29udHJvbGxlcihcImV4ZXJjaXNlVHdvQ29udHJvbGxlclwiLCBmdW5jdGlvbigkcm91dGVQYXJhbXMsIGVzKSB7IC8vIGluamVjdFxyXG4gICAgICB0aGlzLmVzID0gZXM7IC8vIGFzc2lnbmluZyBlcyB0byB0aGUgY29udHJvbGxlciBhcyBhIG1lbWJlclxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgdGhpcy50aXRsZSA9IFwiRXhlcmNpc2UgMlwiO1xyXG5cclxuICAgICAgY29uc3QgX3Bvc3NpYmxlQ29sb3JzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6IFwiQnJvd25cIixcclxuICAgICAgICAgIGhleDogXCIjQTUyQTJBXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG5hbWU6IFwiQmx1ZVwiLFxyXG4gICAgICAgICAgaGV4OiBcIiMwMDAwRkZcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbmFtZTogXCJHYWluc2Jvcm9cIixcclxuICAgICAgICAgIGhleDogXCIjRENEQ0RDXCJcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmdW5jdGlvbiBfZ2V0UmFuZG9tQ29sb3JGcm9tQ29sbGVjdGlvbigpIHtcclxuICAgICAgICBjb25zdCByYW5kb21Db2xvciA9IF9wb3NzaWJsZUNvbG9yc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBfcG9zc2libGVDb2xvcnMubGVuZ3RoKV07XHJcblxyXG4gICAgICAgIHJldHVybiByYW5kb21Db2xvcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vYmplY3RBcnJheSA9IFtdO1xyXG5cclxuICAgICAgdGhpcy5fY3JlYXRlT2JqZWN0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuT2JqZWN0ID0ge1xyXG4gICAgICAgICAgbmFtZTogXCJPYmpcIiArICh0aGlzLm9iamVjdEFycmF5Lmxlbmd0aCArIDEpLFxyXG4gICAgICAgICAgY2xpY2tDb3VudDogMCxcclxuICAgICAgICAgIGNvbG9yOiBfZ2V0UmFuZG9tQ29sb3JGcm9tQ29sbGVjdGlvbigpXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmV0dXJuT2JqZWN0O1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5jb250cm9sbGVySW5pdE9iamVjdCA9IHRoaXMub2JqZWN0QXJyYXk7XHJcblxyXG4gICAgICB0aGlzLmFkZE5ld09iamVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMub2JqZWN0QXJyYXkucHVzaCh0aGlzLl9jcmVhdGVPYmplY3QoKSk7XHJcbiAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgIGxldCBvcmlnaW5hbEJ1dHRvblRleHQgPSBcIkJ1dHRvbiB0ZXh0XCI7XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvbk1vdXNlRW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSBcIlJvbGxlZCBvdmVyXCI7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvblJlc2V0Q2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSBvcmlnaW5hbEJ1dHRvblRleHQ7XHJcbiAgICAgIH07XHJcblxyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29tcG9uZW50KFwiZ3dMb2dpblwiLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1cIixcclxuICAgICAgY29udHJvbGxlcjogXCJsb2dpbkNvbXBvbmVudENvbnRyb2xsZXJcIixcclxuICAgICAgY29udHJvbGxlckFzOiBcImN0cmxcIixcclxuICAgIH0pO1xyXG59KHdpbmRvdy5hbmd1bGFyKSk7XHJcbiIsIiggZnVuY3Rpb24oYW5ndWxhcikge1xyXG4gIGFuZ3VsYXJcclxuICAgIC5tb2R1bGUoXCJhcHBsaWNhdGlvblwiKVxyXG4gICAgLmNvbnRyb2xsZXIoXCJsb2dpbkNvbXBvbmVudENvbnRyb2xsZXJcIiwgZnVuY3Rpb24obG9naW5TZXJ2aWNlKSB7XHJcbiAgICAgIHRoaXMubG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlO1xyXG4gICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29tcG9uZW50KFwibmF2aWdhdGlvblwiLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcInd3dy9hcHAvY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm5hdmlnYXRpb25Db250cm9sbGVyXCIsXHJcbiAgICAgIGNvbnRyb2xsZXJBczogXCJjdHJsXCIsXHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoIGZ1bmN0aW9uKGFuZ3VsYXIpIHtcclxuICBhbmd1bGFyXHJcbiAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuICAgIC5jb250cm9sbGVyKFwibmF2aWdhdGlvbkNvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJGxvY2F0aW9uLCBsb2dpblNlcnZpY2UsIG5hdmlnYXRpb25TZXJ2aWNlLCByb29tU2VydmljZSkge1xyXG4gICAgICB0aGlzLiRvbkluaXQgPSBmdW5jdGlvbigpIHsgLy8gYWRkIHRvIGVhY2ggY29udHJvbGxlclxyXG4gICAgICAgIHRoaXMubG9naW5TZXJ2aWNlID0gbG9naW5TZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGlvblNlcnZpY2UgPSBuYXZpZ2F0aW9uU2VydmljZTtcclxuICAgICAgICB0aGlzLnJvb21TZXJ2aWNlID0gcm9vbVNlcnZpY2U7XHJcblxyXG4gICAgICAgIC8vIGFkZCB3ZWxjb21lIGxpbmtcclxuICAgICAgICBsZXQgd2VsY29tZUl0ZW0gPSB7XHJcbiAgICAgICAgICB0aXRsZTogXCJXZWxjb21lXCIsXHJcbiAgICAgICAgICB1cmwgIDogXCIvd2VsY29tZVwiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbmF2aWdhdGlvblNlcnZpY2UuYWRkTmF2aWdhdGlvbkl0ZW0od2VsY29tZUl0ZW0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgcm9vbSBsaW5rc1xyXG4gICAgICAgIC8vIHRoaXMgaXMgc3luY2hyb25vdXMgZm9yIG5vd1xyXG4gICAgICAgIGxldCByb29tcyA9IHJvb21TZXJ2aWNlLmZldGNoUm9vbXNGcm9tREIoKTtcclxuXHJcbiAgICAgICAgcm9vbXMuZm9yRWFjaChmdW5jdGlvbihyb29tKSB7XHJcbiAgICAgICAgICBjb25zdCBpdGVtVG9BZGQgPSB7XHJcbiAgICAgICAgICAgIHRpdGxlIDogcm9vbS5uYW1lLFxyXG4gICAgICAgICAgICB1cmwgICA6IGAvcm9vbS8ke3Jvb20uaWR9YFxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBuYXZpZ2F0aW9uU2VydmljZS5hZGROYXZpZ2F0aW9uSXRlbShpdGVtVG9BZGQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgbG9naW4gbGlua1xyXG4gICAgICAgIGxldCBsb2dpbkl0ZW0gPSB7XHJcbiAgICAgICAgICB0aXRsZSA6IFwiTG9naW5cIixcclxuICAgICAgICAgIHVybCAgIDogXCIvbG9naW5cIlxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG5hdmlnYXRpb25TZXJ2aWNlLmFkZE5hdmlnYXRpb25JdGVtKGxvZ2luSXRlbSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzSXRlbUFjdGl2ZSh2aWV3TG9jYXRpb24pIHtcclxuICAgICAgICAgIHJldHVybiAodmlld0xvY2F0aW9uID09PSAkbG9jYXRpb24ucGF0aCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiYXBwbGljYXRpb25cIilcclxuXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoXCJyb29tQ29tcG9uZW50Q29udHJvbGxlclwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2VydmVSZWFzb25zID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQmlydGhkYXlcIixcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbmZlcmVuY2VcIixcclxuICAgICAgICAgICAgICAgICAgICBcIkludGVydmlld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiU2NydW0gTWVldGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiSG9uZXltb29uXCJcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucm9vbVN1Ym1pc3Npb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnRcIiwgdGhpcy5zdGFydFRpbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlbmRcIiwgdGhpcy5lbmRUaW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydFRpbWUgPj0gdGhpcy5lbmRUaW1lKSByZXR1cm4gYWxlcnQoXCJNZXNzYWdlIGZyb20gY29udHJvbGxlcjogdGltZSBpbnZhbGlkXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm15Rm9ybS4kaW52YWxpZCkgcmV0dXJuIGFsZXJ0KFwiTWVzc2FnZSBmcm9tIGNvbnRyb2xsZXI6IGZvcm0gaW52YWxpZFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbGVydChcIlJvb20gc3VibWl0dGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn0od2luZG93LmFuZ3VsYXIpKTtcclxuIiwiKCBmdW5jdGlvbihhbmd1bGFyKSB7XHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZShcImFwcGxpY2F0aW9uXCIpXHJcbiAgICAuY29udHJvbGxlcihcInJvb21zQ29udHJvbGxlclwiLCBmdW5jdGlvbihsb2dpblNlcnZpY2UpIHtcclxuICAgICAgdGhpcy5sb2dpblNlcnZpY2UgPSBsb2dpblNlcnZpY2U7XHJcbiAgICB9KTtcclxufSh3aW5kb3cuYW5ndWxhcikpO1xyXG4iXX0=
